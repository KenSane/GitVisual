{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\janry\\\\OneDrive\\\\Desktop\\\\NEWTHESIS\\\\VisualQuery\\\\frontend\\\\src\\\\component\\\\RealTimePessimism.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from 'react';\nimport AuthContext from '../context/AuthContext';\nimport EmotionDetection from './EmotionDetection';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RealTimePessimism = _ref => {\n  _s();\n  let {\n    interactionType,\n    attempts,\n    errors,\n    correct\n  } = _ref;\n  const {\n    authTokens\n  } = useContext(AuthContext);\n  const [pessimismLevel, setPessimismLevel] = useState(null);\n  const [emotion, setEmotion] = useState('');\n  const [headpose, setHeadPose] = useState('');\n  useEffect(() => {\n    const socket = new WebSocket('ws://localhost:8000/ws/pessimism_detection/');\n    socket.onopen = () => {\n      console.log('WebSocket connected');\n    };\n    socket.onmessage = event => {\n      const data = JSON.parse(event.data);\n      setPessimismLevel(data.pessimism_level);\n    };\n    socket.onclose = () => {\n      console.log('WebSocket disconnected');\n    };\n    const sendData = () => {\n      if (socket.readyState === WebSocket.OPEN) {\n        const interactionData = {\n          token: authTokens.access,\n          interaction_type: interactionType,\n          attempts: attempts,\n          errors: errors,\n          correct: correct,\n          emotion: emotion,\n          head_pose: headpose\n        };\n        socket.send(JSON.stringify(interactionData));\n      }\n    };\n    const intervalId = setInterval(sendData, 5000); // Send data every 5 seconds\n\n    return () => {\n      clearInterval(intervalId);\n      socket.close();\n    };\n  }, [authTokens, interactionType, attempts, errors, correct, emotion, headpose]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(EmotionDetection, {\n      setEmotion: setEmotion,\n      setHeadPoseClassification: setHeadPose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 7\n  }, this);\n};\n_s(RealTimePessimism, \"fadVFc3nj1VFb20bv5i3G5/cC9E=\");\n_c = RealTimePessimism;\nexport default RealTimePessimism;\nvar _c;\n$RefreshReg$(_c, \"RealTimePessimism\");","map":{"version":3,"names":["React","useEffect","useState","useContext","AuthContext","EmotionDetection","jsxDEV","_jsxDEV","RealTimePessimism","_ref","_s","interactionType","attempts","errors","correct","authTokens","pessimismLevel","setPessimismLevel","emotion","setEmotion","headpose","setHeadPose","socket","WebSocket","onopen","console","log","onmessage","event","data","JSON","parse","pessimism_level","onclose","sendData","readyState","OPEN","interactionData","token","access","interaction_type","head_pose","send","stringify","intervalId","setInterval","clearInterval","close","children","setHeadPoseClassification","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/janry/OneDrive/Desktop/NEWTHESIS/VisualQuery/frontend/src/component/RealTimePessimism.js"],"sourcesContent":["  import React, { useEffect, useState, useContext } from 'react';\r\n  import AuthContext from '../context/AuthContext';\r\n  import EmotionDetection from './EmotionDetection';\r\n\r\n  const RealTimePessimism = ({ interactionType, attempts, errors, correct }) => {\r\n    const { authTokens } = useContext(AuthContext);\r\n    const [pessimismLevel, setPessimismLevel] = useState(null);\r\n    const [emotion, setEmotion] = useState('');\r\n    const [headpose, setHeadPose] = useState('');\r\n\r\n    useEffect(() => {\r\n      const socket = new WebSocket('ws://localhost:8000/ws/pessimism_detection/');\r\n\r\n      socket.onopen = () => {\r\n        console.log('WebSocket connected');\r\n      };\r\n\r\n      socket.onmessage = (event) => {\r\n        const data = JSON.parse(event.data);\r\n        setPessimismLevel(data.pessimism_level);\r\n      };\r\n\r\n      socket.onclose = () => {\r\n        console.log('WebSocket disconnected');\r\n      };\r\n\r\n      const sendData = () => {\r\n        if (socket.readyState === WebSocket.OPEN) {\r\n          const interactionData = {\r\n            token: authTokens.access,\r\n            interaction_type: interactionType,\r\n            attempts: attempts,\r\n            errors: errors,\r\n            correct: correct,\r\n            emotion: emotion,\r\n            head_pose: headpose,\r\n          };  \r\n          socket.send(JSON.stringify(interactionData));\r\n        }\r\n      };\r\n\r\n      const intervalId = setInterval(sendData, 5000); // Send data every 5 seconds\r\n\r\n      return () => {\r\n        clearInterval(intervalId);\r\n        socket.close();\r\n      };\r\n    }, [authTokens, interactionType, attempts, errors, correct, emotion, headpose]);\r\n\r\n    return (\r\n      <div>\r\n        <EmotionDetection setEmotion={setEmotion} setHeadPoseClassification={setHeadPose} />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  export default RealTimePessimism;\r\n"],"mappings":";;AAAE,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AAC9D,OAAOC,WAAW,MAAM,wBAAwB;AAChD,OAAOC,gBAAgB,MAAM,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElD,MAAMC,iBAAiB,GAAGC,IAAA,IAAoD;EAAAC,EAAA;EAAA,IAAnD;IAAEC,eAAe;IAAEC,QAAQ;IAAEC,MAAM;IAAEC;EAAQ,CAAC,GAAAL,IAAA;EACvE,MAAM;IAAEM;EAAW,CAAC,GAAGZ,UAAU,CAACC,WAAW,CAAC;EAC9C,MAAM,CAACY,cAAc,EAAEC,iBAAiB,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACkB,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAE5CD,SAAS,CAAC,MAAM;IACd,MAAMqB,MAAM,GAAG,IAAIC,SAAS,CAAC,6CAA6C,CAAC;IAE3ED,MAAM,CAACE,MAAM,GAAG,MAAM;MACpBC,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;IACpC,CAAC;IAEDJ,MAAM,CAACK,SAAS,GAAIC,KAAK,IAAK;MAC5B,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACC,IAAI,CAAC;MACnCZ,iBAAiB,CAACY,IAAI,CAACG,eAAe,CAAC;IACzC,CAAC;IAEDV,MAAM,CAACW,OAAO,GAAG,MAAM;MACrBR,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;IACvC,CAAC;IAED,MAAMQ,QAAQ,GAAGA,CAAA,KAAM;MACrB,IAAIZ,MAAM,CAACa,UAAU,KAAKZ,SAAS,CAACa,IAAI,EAAE;QACxC,MAAMC,eAAe,GAAG;UACtBC,KAAK,EAAEvB,UAAU,CAACwB,MAAM;UACxBC,gBAAgB,EAAE7B,eAAe;UACjCC,QAAQ,EAAEA,QAAQ;UAClBC,MAAM,EAAEA,MAAM;UACdC,OAAO,EAAEA,OAAO;UAChBI,OAAO,EAAEA,OAAO;UAChBuB,SAAS,EAAErB;QACb,CAAC;QACDE,MAAM,CAACoB,IAAI,CAACZ,IAAI,CAACa,SAAS,CAACN,eAAe,CAAC,CAAC;MAC9C;IACF,CAAC;IAED,MAAMO,UAAU,GAAGC,WAAW,CAACX,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC;;IAEhD,OAAO,MAAM;MACXY,aAAa,CAACF,UAAU,CAAC;MACzBtB,MAAM,CAACyB,KAAK,CAAC,CAAC;IAChB,CAAC;EACH,CAAC,EAAE,CAAChC,UAAU,EAAEJ,eAAe,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,OAAO,EAAEI,OAAO,EAAEE,QAAQ,CAAC,CAAC;EAE/E,oBACEb,OAAA;IAAAyC,QAAA,eACEzC,OAAA,CAACF,gBAAgB;MAACc,UAAU,EAAEA,UAAW;MAAC8B,yBAAyB,EAAE5B;IAAY;MAAA6B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACjF,CAAC;AAEV,CAAC;AAAC3C,EAAA,CAlDIF,iBAAiB;AAAA8C,EAAA,GAAjB9C,iBAAiB;AAoDvB,eAAeA,iBAAiB;AAAC,IAAA8C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}